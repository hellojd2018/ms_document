# 常问问题

## 在Peers之间的网络中断期间会发生什么？

在对等体之间的网络中断的情况下，可能发生以下事情。

- 对等体之间的心跳复制可能会失败，服务器会检测到这种情况并进入保护当前状态的自我保护模式。
- 注册可能发生在孤立的服务器中，一些客户可能会反映新的注册，而其他客户可能不会。

在网络连接恢复到稳定状态后，情况会自动更新。当对等方能够正常通信时，注册信息将自动传输到没有它们的服务器。最重要的是，在网络中断期间，服务器尝试尽可能具有弹性，但是在此期间客户端可能具有不同的服务器视图。

## 为什么不使用HA代理进行负载均衡？

在AWS云中，实例由于其固有原因而进入和退出流量。ASG可以根据流量扩展实例或销毁它们。无论我们是否使用HAProxy，这里的挑战是处理这种动态性质。即使您使用HAProxy，也需要了解进出的实例，这正是Eureka所做的。

我想到在中间层使用代理的原因之一是你需要粘性会话。如果这是一项要求，HAProxy可以补充尤里卡。但是，由于大多数中间层服务在我们的场景中都是非粘性的，因此我们没有理由通过避免网络跳转来在那里进行代理。另一个积极的副作用是，它使我们的客户对Eureka服务器中断具有相当的弹性，因为客户端拥有所有信息来联系它需要与之交谈的服务。通过HA代理有一个缺点，你不能适应代理中断。

## 为什么不使用Curator / Zookeeper作为服务注册表？

Zookeeper和Eureka在某些领域存在一些重叠，特别是在复制注册信息方面。Eureka可以使用zookeeper来缓存注册表信息并复制它们，但复制只是Eureka提供的一小部分。

除了复制之外，尤里卡还处理各种其他事情：

- 处理注册，续订，到期和取消的REST端点。
- 使实例信息保持最新，以弹性方式处理EIP绑定，部署回滚，自动扩展的复杂性。
- 适应客户端和服务器之间以及对等端之间的网络中断。

动物园管理员的力量在领导者选举，有序更新，分布式同步以及一致性保证（法定人数）方面脱颖而出。

除了复制注册表之外，以上都不适用于Eureka来证明我们必须处理以下复杂情况的其他依赖：

- 您现在必须找到一种方法将EIP分配给类似于Eureka的zookeeper。
- 当zookeeper失败时处理失败。

此外，Eureka经过精心构建，不依赖任何外部组件。

- 大多数服务依靠Eureka来自我引导。
- 降低复杂性。
- 避免另一个失败点。